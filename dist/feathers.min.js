(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.feathers=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){exports=module.exports=require("./debug");exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage();exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function useColors(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}exports.formatters.j=function(v){return JSON.stringify(v)};function formatArgs(){var args=arguments;var useColors=this.useColors;args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff);if(!useColors)return args;var c="color: "+this.color;args=[args[0],c,"color: inherit"].concat(Array.prototype.slice.call(args,1));var index=0;var lastC=0;args[0].replace(/%[a-z%]/g,function(match){if("%%"===match)return;index++;if("%c"===match){lastC=index}});args.splice(lastC,0,c);return args}function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{if(null==namespaces){exports.storage.removeItem("debug")}else{exports.storage.debug=namespaces}}catch(e){}}function load(){var r;try{r=exports.storage.debug}catch(e){}return r}exports.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}},{"./debug":2}],2:[function(require,module,exports){exports=module.exports=debug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=require("ms");exports.names=[];exports.skips=[];exports.formatters={};var prevColor=0;var prevTime;function selectColor(){return exports.colors[prevColor++%exports.colors.length]}function debug(namespace){function disabled(){}disabled.enabled=false;function enabled(){var self=enabled;var curr=+new Date;var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;if(null==self.useColors)self.useColors=exports.useColors();if(null==self.color&&self.useColors)self.color=selectColor();var args=Array.prototype.slice.call(arguments);args[0]=exports.coerce(args[0]);if("string"!==typeof args[0]){args=["%o"].concat(args)}var index=0;args[0]=args[0].replace(/%([a-z%])/g,function(match,format){if(match==="%%")return match;index++;var formatter=exports.formatters[format];if("function"===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--}return match});if("function"===typeof exports.formatArgs){args=exports.formatArgs.apply(self,args)}var logFn=enabled.log||exports.log||console.log.bind(console);logFn.apply(self,args)}enabled.enabled=true;var fn=exports.enabled(namespace)?enabled:disabled;fn.namespace=namespace;return fn}function enable(namespaces){exports.save(namespaces);var split=(namespaces||"").split(/[\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,".*?");if(namespaces[0]==="-"){exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$"))}else{exports.names.push(new RegExp("^"+namespaces+"$"))}}}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true}}return false}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}},{ms:39}],3:[function(require,module,exports){function EventEmitter(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._maxListeners=undefined;EventEmitter.defaultMaxListeners=10;EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");this._maxListeners=n;return this};EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(!this._events)this._events={};if(type==="error"){if(!this._events.error||isObject(this._events.error)&&!this._events.error.length){er=arguments[1];if(er instanceof Error){throw er}else{var err=new Error('Uncaught, unspecified "error" event. ('+er+")");err.context=er;throw err}}}handler=this._events[type];if(isUndefined(handler))return false;if(isFunction(handler)){switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:args=Array.prototype.slice.call(arguments,1);handler.apply(this,args)}}else if(isObject(handler)){args=Array.prototype.slice.call(arguments,1);listeners=handler.slice();len=listeners.length;for(i=0;i<len;i++)listeners[i].apply(this,args)}return true};EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events)this._events={};if(this._events.newListener)this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener);if(!this._events[type])this._events[type]=listener;else if(isObject(this._events[type]))this._events[type].push(listener);else this._events[type]=[this._events[type],listener];if(isObject(this._events[type])&&!this._events[type].warned){if(!isUndefined(this._maxListeners)){m=this._maxListeners}else{m=EventEmitter.defaultMaxListeners}if(m&&m>0&&this._events[type].length>m){this._events[type].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[type].length);if(typeof console.trace==="function"){console.trace()}}}return this};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.once=function(type,listener){if(!isFunction(listener))throw TypeError("listener must be a function");var fired=false;function g(){this.removeListener(type,g);if(!fired){fired=true;listener.apply(this,arguments)}}g.listener=listener;this.on(type,g);return this};EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;list=this._events[type];length=list.length;position=-1;if(list===listener||isFunction(list.listener)&&list.listener===listener){delete this._events[type];if(this._events.removeListener)this.emit("removeListener",type,listener)}else if(isObject(list)){for(i=length;i-->0;){if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}}if(position<0)return this;if(list.length===1){list.length=0;delete this._events[type]}else{list.splice(position,1)}if(this._events.removeListener)this.emit("removeListener",type,listener)}return this};EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener){if(arguments.length===0)this._events={};else if(this._events[type])delete this._events[type];return this}if(arguments.length===0){for(key in this._events){if(key==="removeListener")continue;this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events={};return this}listeners=this._events[type];if(isFunction(listeners)){this.removeListener(type,listeners)}else if(listeners){while(listeners.length)this.removeListener(type,listeners[listeners.length-1])}delete this._events[type];return this};EventEmitter.prototype.listeners=function(type){var ret;if(!this._events||!this._events[type])ret=[];else if(isFunction(this._events[type]))ret=[this._events[type]];else ret=this._events[type].slice();return ret};EventEmitter.prototype.listenerCount=function(type){if(this._events){var evlistener=this._events[type];if(isFunction(evlistener))return 1;else if(evlistener)return evlistener.length}return 0};EventEmitter.listenerCount=function(emitter,type){return emitter.listenerCount(type)};function isFunction(arg){return typeof arg==="function"}function isNumber(arg){return typeof arg==="number"}function isObject(arg){return typeof arg==="object"&&arg!==null}function isUndefined(arg){return arg===void 0}},{}],4:[function(require,module,exports){module.exports=require("./lib/client/index")},{"./lib/client/index":6}],5:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.populateParams=populateParams;exports.populateHeader=populateHeader;function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function populateParams(){return function(hook){var app=hook.app;Object.assign(hook.params,{user:app.get("user"),token:app.get("token")})}}function populateHeader(){var options=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];return function(hook){if(hook.params.token){hook.params.headers=Object.assign({},_defineProperty({},options.header||"Authorization",hook.params.token),hook.params.headers)}}}},{}],6:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(){var opts=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var config=Object.assign({},defaults,opts);return function(){var app=this;if(!app.get("storage")){app.set("storage",(0,_utils.getStorage)(config.storage))}app.authenticate=function(){var options=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var storage=this.get("storage");var getOptions=Promise.resolve(options);if(!options.type){getOptions=(0,_utils.getJWT)(config.tokenKey,config.cookie,this.get("storage")).then(function(token){if(!token){return Promise.reject(new _feathersErrors2.default.NotAuthenticated("Could not find stored JWT and no authentication type was given"))}return{type:"token",token:token}})}var handleResponse=function handleResponse(response){app.set("token",response.token);app.set("user",response.data);return Promise.resolve(storage.setItem(config.tokenKey,response.token)).then(function(){return response})};return getOptions.then(function(options){var endPoint=void 0;if(options.type==="local"){endPoint=config.localEndpoint}else if(options.type==="token"){endPoint=config.tokenEndpoint}else if(options.type==="facebook"){endPoint=config.facebookEndpoint}else if(options.type==="google"){endPoint=config.googleEndpoint}else if(options.type==="apple"){endPoint=config.appleEndpoint}else{throw new Error("Unsupported authentication 'type': "+options.type)}return(0,_utils.connected)(app).then(function(socket){if(app.rest){return app.service(endPoint).create(options).then(handleResponse)}var method=app.io?"emit":"send";return(0,_utils.authenticateSocket)(options,socket,method).then(handleResponse)})})};app.logout=function(){app.set("user",null);app.set("token",null);(0,_utils.clearCookie)(config.cookie);return Promise.resolve(app.get("storage").setItem(config.tokenKey,"")).then(function(){if(app.io||app.primus){var method=app.io?"emit":"send";var socket=app.io?app.io:app.primus;return(0,_utils.logoutSocket)(socket,method)}})};app.mixins.push(function(service){if(typeof service.before!=="function"||typeof service.after!=="function"){throw new Error("It looks like feathers-hooks isn't configured. It is required before running feathers-authentication.")}service.before(hooks.populateParams(config))});if(app.rest){app.mixins.push(function(service){service.before(hooks.populateHeader(config))})}}};var _feathersErrors=require("feathers-errors");var _feathersErrors2=_interopRequireDefault(_feathersErrors);var _hooks=require("./hooks");var hooks=_interopRequireWildcard(_hooks);var _utils=require("./utils");function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var defaults={cookie:"feathers-jwt",tokenKey:"feathers-jwt",localEndpoint:"/auth/local",tokenEndpoint:"/auth/token",facebookEndpoint:"/auth/facebook",googleEndpoint:"/auth/google",appleEndpoint:"/auth/apple"};module.exports=exports["default"]},{"./hooks":5,"./utils":7,"feathers-errors":12}],7:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.connected=connected;exports.authenticateSocket=authenticateSocket;exports.logoutSocket=logoutSocket;exports.getCookie=getCookie;exports.clearCookie=clearCookie;exports.getJWT=getJWT;exports.getStorage=getStorage;function connected(app){return new Promise(function(resolve,reject){if(app.rest){return resolve()}var socket=app.io||app.primus;if(!socket){return reject(new Error("It looks like no client connection has been configured."))}socket.once("disconnect",reject);socket.once("close",reject);if(app.io&&!socket.connected||app.primus&&socket.readyState!==3){var connectEvent=app.primus?"open":"connect";socket.once(connectEvent,function(){return resolve(socket)})}else{resolve(socket)}})}function authenticateSocket(options,socket,method){return new Promise(function(resolve,reject){socket.once("unauthorized",reject);socket.once("authenticated",resolve);socket[method]("authenticate",options)})}function logoutSocket(socket,method){return new Promise(function(resolve,reject){socket[method]("logout",function(error){if(error){reject(error)}resolve()})})}function getCookie(name){if(typeof document!=="undefined"){var value="; "+document.cookie;var parts=value.split("; "+name+"=");if(parts.length===2){return parts.pop().split(";").shift()}}return null}function clearCookie(name){if(typeof document!=="undefined"){document.cookie=name+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;"}return null}function getJWT(tokenKey,cookieKey,storage){return Promise.resolve(storage.getItem(tokenKey)).then(function(jwt){var cookieToken=getCookie(cookieKey);if(cookieToken){return cookieToken}return jwt})}function getStorage(storage){if(storage){return storage}return{store:{},getItem:function getItem(key){return this.store[key]},setItem:function setItem(key,value){return this.store[key]=value}}}},{}],8:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj};exports.default=getArguments;var noop=exports.noop=function noop(){};var getCallback=function getCallback(args){var last=args[args.length-1];return typeof last==="function"?last:noop};var getParams=function getParams(args,position){return _typeof(args[position])==="object"?args[position]:{}};var updateOrPatch=function updateOrPatch(name){return function(args){var id=args[0];var data=args[1];var callback=getCallback(args);var params=getParams(args,2);if(typeof id==="function"){throw new Error("First parameter for '"+name+"' can not be a function")}if((typeof data==="undefined"?"undefined":_typeof(data))!=="object"){throw new Error("No data provided for '"+name+"'")}if(args.length>4){throw new Error("Too many arguments for '"+name+"' service method")}return[id,data,params,callback]}};var getOrRemove=function getOrRemove(name){return function(args){var id=args[0];var params=getParams(args,1);var callback=getCallback(args);if(args.length>3){throw new Error("Too many arguments for '"+name+"' service method")}if(typeof id==="function"){throw new Error("First parameter for '"+name+"' can not be a function")}return[id,params,callback]}};var converters=exports.converters={find:function find(args){var callback=getCallback(args);var params=getParams(args,0);if(args.length>2){throw new Error("Too many arguments for 'find' service method")}return[params,callback]},create:function create(args){var data=args[0];var params=getParams(args,1);var callback=getCallback(args);if((typeof data==="undefined"?"undefined":_typeof(data))!=="object"){throw new Error("First parameter for 'create' must be an object")}if(args.length>3){throw new Error("Too many arguments for 'create' service method")}return[data,params,callback]},update:updateOrPatch("update"),patch:updateOrPatch("patch"),get:getOrRemove("get"),remove:getOrRemove("remove")};function getArguments(method,args){return converters[method](args)}},{}],9:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _arguments=require("./arguments");var _arguments2=_interopRequireDefault(_arguments);var _utils=require("./utils");var _hooks=require("./hooks");var _hooks2=_interopRequireDefault(_hooks);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.default={getArguments:_arguments2.default,stripSlashes:_utils.stripSlashes,each:_utils.each,hooks:_hooks2.default,matcher:_utils.matcher,sorter:_utils.sorter};module.exports=exports["default"]},{"./arguments":8,"./hooks":10,"./utils":11}],10:[function(require,module,exports){"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj};var _utils=require("./utils");function getOrRemove(args){return{id:args[0],params:args[1],callback:args[2]}}function updateOrPatch(args){return{id:args[0],data:args[1],params:args[2],callback:args[3]}}exports.converters={find:function find(args){return{params:args[0],callback:args[1]}},create:function create(args){return{data:args[0],params:args[1],callback:args[2]}},get:getOrRemove,remove:getOrRemove,update:updateOrPatch,patch:updateOrPatch};exports.hookObject=exports.hook=function(method,type,args){var hook=exports.converters[method](args);hook.method=method;hook.type=type;return hook};var defaultMakeArguments=exports.defaultMakeArguments=function(hook){var result=[];if(typeof hook.id!=="undefined"){result.push(hook.id)}if(hook.data){result.push(hook.data)}result.push(hook.params||{});result.push(hook.callback);return result};exports.makeArguments=function(hook){if(hook.method==="find"){return[hook.params,hook.callback]}if(hook.method==="get"||hook.method==="remove"){return[hook.id,hook.params,hook.callback]}if(hook.method==="update"||hook.method==="patch"){return[hook.id,hook.data,hook.params,hook.callback]}if(hook.method==="create"){return[hook.data,hook.params,hook.callback]}return defaultMakeArguments(hook)};exports.convertHookData=function(obj){var hook={};if(Array.isArray(obj)){hook={all:obj}}else if((typeof obj==="undefined"?"undefined":_typeof(obj))!=="object"){hook={all:[obj]}}else{(0,_utils.each)(obj,function(value,key){hook[key]=!Array.isArray(value)?[value]:value})}return hook}},{"./utils":11}],11:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj};exports.stripSlashes=stripSlashes;exports.each=each;exports.matcher=matcher;exports.sorter=sorter;function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function stripSlashes(name){return name.replace(/^(\/*)|(\/*)$/g,"")}function each(obj,callback){if(obj&&typeof obj.forEach==="function"){obj.forEach(callback)}else if((typeof obj==="undefined"?"undefined":_typeof(obj))==="object"){Object.keys(obj).forEach(function(key){return callback(obj[key],key)})}}var _=exports._={some:function some(value,callback){return Object.keys(value).map(function(key){return[value[key],key]}).some(function(current){return callback.apply(undefined,_toConsumableArray(current))})},every:function every(value,callback){return Object.keys(value).map(function(key){return[value[key],key]}).every(function(current){return callback.apply(undefined,_toConsumableArray(current))})},isMatch:function isMatch(obj,item){return Object.keys(item).every(function(key){return obj[key]===item[key]})},omit:function omit(obj){var result=_extends({},obj);for(var _len=arguments.length,keys=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){keys[_key-1]=arguments[_key]}keys.forEach(function(key){return delete result[key]});return result}};var specialFilters=exports.specialFilters={$in:function $in(key,ins){return function(current){return ins.indexOf(current[key])!==-1}},$nin:function $nin(key,nins){return function(current){return nins.indexOf(current[key])===-1}},$lt:function $lt(key,value){return function(current){return current[key]<value}},$lte:function $lte(key,value){return function(current){return current[key]<=value}},$gt:function $gt(key,value){return function(current){return current[key]>value}},$gte:function $gte(key,value){return function(current){return current[key]>=value}},$ne:function $ne(key,value){return function(current){return current[key]!==value}}};function matcher(originalQuery){var query=_.omit(originalQuery,"$limit","$skip","$sort");return function(item){if(query.$or&&_.some(query.$or,function(or){return _.isMatch(item,or)})){return true}return _.every(query,function(value,key){if((typeof value==="undefined"?"undefined":_typeof(value))==="object"){return _.every(value,function(target,filterType){if(specialFilters[filterType]){var filter=specialFilters[filterType](key,target);return filter(item)}return false})}else if(typeof item[key]!=="undefined"){return item[key]===query[key]}return false})}}function sorter($sort){return function(first,second){var comparator=0;each($sort,function(modifier,key){modifier=parseInt(modifier,10);if(first[key]<second[key]){comparator-=1*modifier}if(first[key]>second[key]){comparator+=1*modifier}});return comparator}}},{}],12:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function _extendableBuiltin(cls){function ExtendableBuiltin(){var instance=Reflect.construct(cls,Array.from(arguments));Object.setPrototypeOf(instance,Object.getPrototypeOf(this));return instance}ExtendableBuiltin.prototype=Object.create(cls.prototype,{constructor:{value:cls,enumerable:false,writable:true,configurable:true}});if(Object.setPrototypeOf){Object.setPrototypeOf(ExtendableBuiltin,cls)}else{ExtendableBuiltin.__proto__=cls}return ExtendableBuiltin}var debug=require("debug")("feathers-errors");var FeathersError=function(_extendableBuiltin2){_inherits(FeathersError,_extendableBuiltin2);function FeathersError(msg,name,code,className,data){_classCallCheck(this,FeathersError);msg=msg||"Error";var errors=undefined;var message=undefined;var newData=undefined;if(msg instanceof Error){message=msg.message||"Error";if(msg.errors){errors=msg.errors}}else if((typeof msg==="undefined"?"undefined":_typeof(msg))==="object"){message=msg.message||"Error";data=msg}else{message=msg}if(data){newData=_extends({},data);if(newData.errors){errors=newData.errors;delete newData.errors}}var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(FeathersError).call(this,message));_this.type="FeathersError";_this.name=name;_this.message=message;_this.code=code;_this.className=className;_this.data=newData;_this.errors=errors||{};debug(_this.name+"("+_this.code+"): "+_this.message);return _this}_createClass(FeathersError,[{key:"toJSON",value:function toJSON(){return{name:this.name,message:this.message,code:this.code,className:this.className,data:this.data,errors:this.errors}}}]);return FeathersError}(_extendableBuiltin(Error));var BadRequest=function(_FeathersError){_inherits(BadRequest,_FeathersError);function BadRequest(message,data){_classCallCheck(this,BadRequest);return _possibleConstructorReturn(this,Object.getPrototypeOf(BadRequest).call(this,message,"BadRequest",400,"bad-request",data))}return BadRequest}(FeathersError);var NotAuthenticated=function(_FeathersError2){_inherits(NotAuthenticated,_FeathersError2);function NotAuthenticated(message,data){_classCallCheck(this,NotAuthenticated);return _possibleConstructorReturn(this,Object.getPrototypeOf(NotAuthenticated).call(this,message,"NotAuthenticated",401,"not-authenticated",data))}return NotAuthenticated}(FeathersError);var PaymentError=function(_FeathersError3){_inherits(PaymentError,_FeathersError3);function PaymentError(message,data){_classCallCheck(this,PaymentError);return _possibleConstructorReturn(this,Object.getPrototypeOf(PaymentError).call(this,message,"PaymentError",402,"payment-error",data))}return PaymentError}(FeathersError);var Forbidden=function(_FeathersError4){_inherits(Forbidden,_FeathersError4);function Forbidden(message,data){_classCallCheck(this,Forbidden);return _possibleConstructorReturn(this,Object.getPrototypeOf(Forbidden).call(this,message,"Forbidden",403,"forbidden",data))}return Forbidden}(FeathersError);var NotFound=function(_FeathersError5){_inherits(NotFound,_FeathersError5);function NotFound(message,data){_classCallCheck(this,NotFound);return _possibleConstructorReturn(this,Object.getPrototypeOf(NotFound).call(this,message,"NotFound",404,"not-found",data))}return NotFound}(FeathersError);var MethodNotAllowed=function(_FeathersError6){_inherits(MethodNotAllowed,_FeathersError6);function MethodNotAllowed(message,data){_classCallCheck(this,MethodNotAllowed);return _possibleConstructorReturn(this,Object.getPrototypeOf(MethodNotAllowed).call(this,message,"MethodNotAllowed",405,"method-not-allowed",data))}return MethodNotAllowed}(FeathersError);var NotAcceptable=function(_FeathersError7){_inherits(NotAcceptable,_FeathersError7);function NotAcceptable(message,data){_classCallCheck(this,NotAcceptable);return _possibleConstructorReturn(this,Object.getPrototypeOf(NotAcceptable).call(this,message,"NotAcceptable",406,"not-acceptable",data))}return NotAcceptable}(FeathersError);var Timeout=function(_FeathersError8){_inherits(Timeout,_FeathersError8);function Timeout(message,data){_classCallCheck(this,Timeout);return _possibleConstructorReturn(this,Object.getPrototypeOf(Timeout).call(this,message,"Timeout",408,"timeout",data))}return Timeout}(FeathersError);var Conflict=function(_FeathersError9){_inherits(Conflict,_FeathersError9);function Conflict(message,data){_classCallCheck(this,Conflict);return _possibleConstructorReturn(this,Object.getPrototypeOf(Conflict).call(this,message,"Conflict",409,"conflict",data))}return Conflict}(FeathersError);var Unprocessable=function(_FeathersError10){_inherits(Unprocessable,_FeathersError10);function Unprocessable(message,data){_classCallCheck(this,Unprocessable);return _possibleConstructorReturn(this,Object.getPrototypeOf(Unprocessable).call(this,message,"Unprocessable",422,"unprocessable",data))}return Unprocessable}(FeathersError);var GeneralError=function(_FeathersError11){_inherits(GeneralError,_FeathersError11);function GeneralError(message,data){_classCallCheck(this,GeneralError);return _possibleConstructorReturn(this,Object.getPrototypeOf(GeneralError).call(this,message,"GeneralError",500,"general-error",data))}return GeneralError}(FeathersError);var NotImplemented=function(_FeathersError12){_inherits(NotImplemented,_FeathersError12);function NotImplemented(message,data){_classCallCheck(this,NotImplemented);return _possibleConstructorReturn(this,Object.getPrototypeOf(NotImplemented).call(this,message,"NotImplemented",501,"not-implemented",data))}return NotImplemented}(FeathersError);var Unavailable=function(_FeathersError13){_inherits(Unavailable,_FeathersError13);function Unavailable(message,data){_classCallCheck(this,Unavailable);return _possibleConstructorReturn(this,Object.getPrototypeOf(Unavailable).call(this,message,"Unavailable",503,"unavailable",data))}return Unavailable}(FeathersError);var errors={FeathersError:FeathersError,BadRequest:BadRequest,NotAuthenticated:NotAuthenticated,PaymentError:PaymentError,Forbidden:Forbidden,NotFound:NotFound,MethodNotAllowed:MethodNotAllowed,NotAcceptable:NotAcceptable,Timeout:Timeout,Conflict:Conflict,Unprocessable:Unprocessable,GeneralError:GeneralError,NotImplemented:NotImplemented,Unavailable:Unavailable,400:BadRequest,401:NotAuthenticated,402:PaymentError,403:Forbidden,404:NotFound,405:MethodNotAllowed,406:NotAcceptable,408:Timeout,409:Conflict,422:Unprocessable,500:GeneralError,501:NotImplemented,503:Unavailable};function convert(error){if(!error){return error}var FeathersError=errors[error.name];var result=FeathersError?new FeathersError(error.message,error.data):new Error(error.message||error);if((typeof error==="undefined"?"undefined":_typeof(error))==="object"){_extends(result,error)}return result}exports.default=_extends({convert:convert,types:errors,errors:errors},errors);module.exports=exports["default"]},{debug:1}],13:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){
return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj};exports.lowerCase=lowerCase;exports.removeQuery=removeQuery;exports.pluckQuery=pluckQuery;exports.remove=remove;exports.pluck=pluck;exports.disable=disable;exports.populate=populate;var errors=require("feathers-errors").errors;function lowerCase(){for(var _len=arguments.length,fields=Array(_len),_key=0;_key<_len;_key++){fields[_key]=arguments[_key]}var lowerCaseFields=function lowerCaseFields(data){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=fields[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var field=_step.value;if(data[field]){if(typeof data[field]!=="string"){throw new errors.BadRequest("Expected string")}else{data[field]=data[field].toLowerCase()}}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}};var callback=typeof fields[fields.length-1]==="function"?fields.pop():function(){return true};return function(hook){var result=hook.type==="before"?hook.data:hook.result;var next=function next(condition){if(result&&condition){if(hook.method==="find"||Array.isArray(result)){(result.data||result).forEach(lowerCaseFields)}else{lowerCaseFields(result)}}return hook};var check=callback(hook);return check&&typeof check.then==="function"?check.then(next):next(check)}}function removeQuery(){for(var _len2=arguments.length,fields=Array(_len2),_key2=0;_key2<_len2;_key2++){fields[_key2]=arguments[_key2]}var removeQueries=function removeQueries(data){var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=fields[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var field=_step2.value;data[field]=undefined;delete data[field]}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}};var callback=typeof fields[fields.length-1]==="function"?fields.pop():function(){return true};return function(hook){if(hook.type==="after"){throw new errors.GeneralError("Provider '"+hook.params.provider+"' can not remove query params on after hook.")}var result=hook.params.query;var next=function next(condition){if(result&&condition){removeQueries(result)}return hook};var check=callback(hook);return check&&typeof check.then==="function"?check.then(next):next(check)}}function pluckQuery(){for(var _len3=arguments.length,fields=Array(_len3),_key3=0;_key3<_len3;_key3++){fields[_key3]=arguments[_key3]}var pluckQueries=function pluckQueries(data){var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=Object.keys(data)[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var key=_step3.value;if(fields.indexOf(key)===-1){data[key]=undefined;delete data[key]}}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}};var callback=typeof fields[fields.length-1]==="function"?fields.pop():function(){return true};return function(hook){if(hook.type==="after"){throw new errors.GeneralError("Provider '"+hook.params.provider+"' can not pluck query params on after hook.")}var result=hook.params.query;var next=function next(condition){if(result&&condition){pluckQueries(result)}return hook};var check=callback(hook);return check&&typeof check.then==="function"?check.then(next):next(check)}}function containsField(obj,find){var args=find.split(".");for(var i=0;i<args.length;i++){if(!obj||!obj.hasOwnProperty(args[i])){return false}obj=obj[args[i]]}return true}function removeField(obj,find){var args=find.split(".");for(var i=0;i<args.length;i++){if(!obj||!obj.hasOwnProperty(args[i])){return false}if(i===args.length-1){obj[args[i]]=undefined;delete obj[args[i]];return true}obj=obj[args[i]]}}function remove(){for(var _len4=arguments.length,fields=Array(_len4),_key4=0;_key4<_len4;_key4++){fields[_key4]=arguments[_key4]}var removeFields=function removeFields(data){var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=fields[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var field=_step4.value;if(containsField(data,field)){removeField(data,field)}}}catch(err){_didIteratorError4=true;_iteratorError4=err}finally{try{if(!_iteratorNormalCompletion4&&_iterator4.return){_iterator4.return()}}finally{if(_didIteratorError4){throw _iteratorError4}}}};var callback=typeof fields[fields.length-1]==="function"?fields.pop():function(hook){return!!hook.params.provider};return function(hook){var result=hook.type==="before"?hook.data:hook.result;var next=function next(condition){if(result&&condition){if(Array.isArray(result)){result.forEach(removeFields)}else{removeFields(result);if(result.data){if(Array.isArray(result.data)){result.data.forEach(removeFields)}else{removeFields(result.data)}}}}return hook};var check=callback(hook);return check&&typeof check.then==="function"?check.then(next):next(check)}}function pluck(){for(var _len5=arguments.length,fields=Array(_len5),_key5=0;_key5<_len5;_key5++){fields[_key5]=arguments[_key5]}var pluckFields=function pluckFields(data){var _iteratorNormalCompletion5=true;var _didIteratorError5=false;var _iteratorError5=undefined;try{for(var _iterator5=Object.keys(data)[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=true){var key=_step5.value;if(fields.indexOf(key)===-1){data[key]=undefined;delete data[key]}}}catch(err){_didIteratorError5=true;_iteratorError5=err}finally{try{if(!_iteratorNormalCompletion5&&_iterator5.return){_iterator5.return()}}finally{if(_didIteratorError5){throw _iteratorError5}}}};var callback=typeof fields[fields.length-1]==="function"?fields.pop():function(hook){return!!hook.params.provider};return function(hook){var result=hook.type==="before"?hook.data:hook.result;var next=function next(condition){if(result&&condition){if(hook.method==="find"||Array.isArray(result)){(result.data||result).forEach(pluckFields)}else{pluckFields(result)}}return hook};var check=callback(hook);return check&&typeof check.then==="function"?check.then(next):next(check)}}function disable(realm){var _arguments=arguments;if(!realm){return function(hook){throw new errors.MethodNotAllowed("Calling '"+hook.method+"' not allowed.")}}else if(typeof realm==="function"){return function(hook){var result=realm(hook);var next=function next(check){if(!check){throw new errors.MethodNotAllowed("Calling '"+hook.method+"' not allowed.")}};if(result&&typeof result.then==="function"){return result.then(next)}next(result)}}else{var _len6,args,_key6;var _ret=function(){for(_len6=_arguments.length,args=Array(_len6>1?_len6-1:0),_key6=1;_key6<_len6;_key6++){args[_key6-1]=_arguments[_key6]}var providers=[realm].concat(args);return{v:function v(hook){var provider=hook.params.provider;if(realm==="external"&&provider||providers.indexOf(provider)!==-1){throw new errors.MethodNotAllowed("Provider '"+hook.params.provider+"' can not call '"+hook.method+"'")}}}}();if((typeof _ret==="undefined"?"undefined":_typeof(_ret))==="object")return _ret.v}}function populate(target,options){options=Object.assign({},options);if(!options.service){throw new Error("You need to provide a service")}var field=options.field||target;return function(hook){function populate(item){if(!item[field]){return Promise.resolve(item)}var id=item[field];if(typeof item.toObject==="function"){item=item.toObject(options)}else if(typeof item.toJSON==="function"){item=item.toJSON(options)}var params=Object.assign({},params,{query:undefined});var promise=Array.isArray(id)?Promise.all(id.map(function(objectID){return hook.app.service(options.service).get(objectID,params)})):hook.app.service(options.service).get(id,params);return promise.then(function(relatedItem){if(relatedItem){item[target]=relatedItem}return item})}if(hook.type==="after"){var _ret2=function(){var isPaginated=hook.method==="find"&&hook.result.data;var data=isPaginated?hook.result.data:hook.result;if(Array.isArray(data)){return{v:Promise.all(data.map(populate)).then(function(results){if(isPaginated){hook.result.data=results}else{hook.result=results}return hook})}}return{v:populate(hook.result).then(function(item){hook.result=item;return hook})}}();if((typeof _ret2==="undefined"?"undefined":_typeof(_ret2))==="object")return _ret2.v}}}},{"feathers-errors":12}],14:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj};exports.isHookObject=isHookObject;exports.processHooks=processHooks;exports.addHookMethod=addHookMethod;var _feathersCommons=require("feathers-commons");function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function isHookObject(hookObject){return(typeof hookObject==="undefined"?"undefined":_typeof(hookObject))==="object"&&typeof hookObject.method==="string"&&(hookObject.type==="before"||hookObject.type==="after")}function processHooks(hooks,initialHookObject){var _this=this;var hookObject=initialHookObject;var updateCurrentHook=function updateCurrentHook(current){if(current){if(!isHookObject(current)){throw new Error(hookObject.type+" hook for '"+hookObject.method+"' method returned invalid hook object")}hookObject=current}return hookObject};var promise=Promise.resolve(hookObject);hooks.forEach(function(fn){var hook=fn.bind(_this);if(hook.length===2){promise=promise.then(function(hookObject){return new Promise(function(resolve,reject){hook(hookObject,function(error,result){return error?reject(error):resolve(result)})})})}else{promise=promise.then(hook)}promise=promise.then(updateCurrentHook)});return promise.catch(function(error){error.hook=hookObject;throw error})}function addHookMethod(service,type,methods){var prop="__"+type+"Hooks";service[prop]={};methods.forEach(function(method){if(typeof service[method]==="function"){service[prop][method]=[]}});service.mixin(_defineProperty({},type,function(obj){var _this2=this;var hooks=_feathersCommons.hooks.convertHookData(obj);methods.forEach(function(method){if(typeof _this2[method]!=="function"){return}var myHooks=_this2[prop][method];if(hooks.all){myHooks.push.apply(myHooks,hooks.all)}if(hooks[method]){myHooks.push.apply(myHooks,hooks[method])}});return this}))}},{"feathers-commons":9}],15:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _feathersCommons=require("feathers-commons");var _bundled=require("./bundled");var hooks=_interopRequireWildcard(_bundled);var _commons=require("./commons");function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function isPromise(result){return typeof result!=="undefined"&&typeof result.then==="function"}function hookMixin(service){if(typeof service.mixin!=="function"){return}var app=this;var methods=app.methods;var oldBefore=service.before;var oldAfter=service.after;var mixin={};(0,_commons.addHookMethod)(service,"before",methods);(0,_commons.addHookMethod)(service,"after",methods);methods.forEach(function(method){if(typeof service[method]!=="function"){return}mixin[method]=function(){var _super=this._super.bind(this);var hookObject=_feathersCommons.hooks.hookObject(method,"before",arguments);hookObject.app=app;return _commons.processHooks.call(this,this.__beforeHooks[method],hookObject).then(function(hookObject){if(typeof hookObject.result!=="undefined"){return Promise.resolve(hookObject)}return new Promise(function(resolve,reject){var args=_feathersCommons.hooks.makeArguments(hookObject);var callback=function callback(error,result){if(error){reject(error)}else{hookObject.result=result;resolve(hookObject)}};args.splice(args.length-1,1,callback);var result=_super.apply(undefined,_toConsumableArray(args));if(isPromise(result)){result.then(function(data){return callback(null,data)},callback)}})}).then(function(hookObject){return Object.assign({},hookObject,{type:"after"})}).then(_commons.processHooks.bind(this,this.__afterHooks[method])).then(function(hookObject){return hookObject.result})}});service.mixin(mixin);if(oldBefore){service.before(oldBefore)}if(oldAfter){service.after(oldAfter)}}function configure(){return function(){this.mixins.unshift(hookMixin)}}configure.removeQuery=hooks.removeQuery;configure.pluckQuery=hooks.pluckQuery;configure.lowerCase=hooks.lowerCase;configure.remove=hooks.remove;configure.pluck=hooks.pluck;configure.disable=hooks.disable;configure.populate=hooks.populate;exports.default=configure;module.exports=exports["default"]},{"./bundled":13,"./commons":14,"feathers-commons":9}],16:[function(require,module,exports){module.exports=require("./lib/client")},{"./lib/client":17}],17:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(connection,options){if(!connection){throw new Error("Primus connection needs to be provided")}var defaultService=function defaultService(name){return new _client2.default(Object.assign({},options,{name:name,connection:connection,method:"send"}))};var initialize=function initialize(){if(typeof this.defaultService==="function"){throw new Error("Only one default client provider can be configured")}this.primus=connection;this.defaultService=defaultService};initialize.Service=_client2.default;initialize.service=defaultService;return initialize};var _client=require("feathers-socket-commons/client");var _client2=_interopRequireDefault(_client);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}module.exports=exports["default"]},{"feathers-socket-commons/client":25}],18:[function(require,module,exports){arguments[4][4][0].apply(exports,arguments)},{"./lib/client/index":21,dup:4}],19:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _qs=require("qs");var _qs2=_interopRequireDefault(_qs);var _feathersCommons=require("feathers-commons");var _feathersErrors=require("feathers-errors");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function toError(error){throw(0,_feathersErrors.convert)(error)}var Base=function(){function Base(settings){_classCallCheck(this,Base);this.name=(0,_feathersCommons.stripSlashes)(settings.name);this.options=settings.options;this.connection=settings.connection;this.base=settings.base+"/"+this.name}_createClass(Base,[{key:"makeUrl",value:function makeUrl(params,id){params=params||{};var url=this.base;if(typeof id!=="undefined"&&id!==null){url+="/"+id}if(Object.keys(params).length!==0){var queryString=_qs2.default.stringify(params);url+="?"+queryString}return url}},{key:"find",value:function find(){var params=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];return this.request({url:this.makeUrl(params.query),method:"GET",headers:_extends({},params.headers)}).catch(toError)}},{key:"get",value:function get(id){var params=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];return this.request({url:this.makeUrl(params.query,id),method:"GET",headers:_extends({},params.headers)}).catch(toError)}},{key:"create",value:function create(body){var params=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];return this.request({url:this.makeUrl(params.query),body:body,method:"POST",headers:_extends({"Content-Type":"application/json"},params.headers)}).catch(toError)}},{key:"update",value:function update(id,body){var params=arguments.length<=2||arguments[2]===undefined?{}:arguments[2];return this.request({url:this.makeUrl(params.query,id),body:body,method:"PUT",headers:_extends({"Content-Type":"application/json"},params.headers)}).catch(toError)}},{key:"patch",value:function patch(id,body){var params=arguments.length<=2||arguments[2]===undefined?{}:arguments[2];return this.request({url:this.makeUrl(params.query,id),body:body,method:"PATCH",headers:_extends({"Content-Type":"application/json"},params.headers)}).catch(toError)}},{key:"remove",value:function remove(id){var params=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];return this.request({url:this.makeUrl(params.query,id),method:"DELETE",headers:_extends({},params.headers)}).catch(toError)}}]);return Base}();exports.default=Base;module.exports=exports["default"]},{"feathers-commons":9,"feathers-errors":12,qs:41}],20:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _base=require("./base");var _base2=_interopRequireDefault(_base);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Service=function(_Base){_inherits(Service,_Base);function Service(){_classCallCheck(this,Service);return _possibleConstructorReturn(this,Object.getPrototypeOf(Service).apply(this,arguments))}_createClass(Service,[{key:"request",value:function request(options){var fetchOptions=_extends({},options);fetchOptions.headers=_extends({Accept:"application/json"},fetchOptions.headers);if(options.body){fetchOptions.body=JSON.stringify(options.body)}var fetch=this.connection;return fetch(options.url,fetchOptions).then(this.checkStatus).then(function(response){return response.json()})}},{key:"checkStatus",value:function checkStatus(response){if(response.ok){return response}return response.json().then(function(error){error.response=response;throw error})}}]);return Service}(_base2.default);exports.default=Service;module.exports=exports["default"]},{"./base":19}],21:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(){var base=arguments.length<=0||arguments[0]===undefined?"":arguments[0];var result={};Object.keys(transports).forEach(function(key){var Service=transports[key];result[key]=function(connection){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];if(!connection){throw new Error(key+" has to be provided to feathers-rest")}var defaultService=function defaultService(name){return new Service({base:base,name:name,connection:connection,options:options})};var initialize=function initialize(){if(typeof this.defaultService==="function"){throw new Error("Only one default client provider can be configured")}this.rest=connection;this.defaultService=defaultService};initialize.Service=Service;initialize.service=defaultService;return initialize}});return result};var _jquery=require("./jquery");var _jquery2=_interopRequireDefault(_jquery);var _superagent=require("./superagent");var _superagent2=_interopRequireDefault(_superagent);var _request=require("./request");var _request2=_interopRequireDefault(_request);var _fetch=require("./fetch");var _fetch2=_interopRequireDefault(_fetch);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var transports={jquery:_jquery2.default,superagent:_superagent2.default,request:_request2.default,fetch:_fetch2.default};module.exports=exports["default"]},{"./fetch":20,"./jquery":22,"./request":23,"./superagent":24}],22:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _base=require("./base");var _base2=_interopRequireDefault(_base);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Service=function(_Base){_inherits(Service,_Base);function Service(){_classCallCheck(this,Service);return _possibleConstructorReturn(this,Object.getPrototypeOf(Service).apply(this,arguments))}_createClass(Service,[{key:"request",value:function request(options){var _this2=this;var opts=_extends({dataType:options.type||"json"},options);if(options.body){opts.data=JSON.stringify(options.body);opts.contentType="application/json"}delete opts.type;delete opts.body;return new Promise(function(resolve,reject){_this2.connection.ajax(opts).then(resolve,function(xhr){var error=xhr.responseText;try{error=JSON.parse(error)}catch(e){error=new Error(xhr.responseText)}error.xhr=error.response=xhr;reject(error)})})}}]);return Service}(_base2.default);exports.default=Service;module.exports=exports["default"]},{"./base":19}],23:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _base=require("./base");var _base2=_interopRequireDefault(_base);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Service=function(_Base){_inherits(Service,_Base);function Service(){_classCallCheck(this,Service);return _possibleConstructorReturn(this,Object.getPrototypeOf(Service).apply(this,arguments))}_createClass(Service,[{key:"request",value:function request(options){var _this2=this;return new Promise(function(resolve,reject){_this2.connection(_extends({json:true},options),function(error,res,data){if(error){return reject(error)}if(!error&&res.statusCode>=400){if(typeof data==="string"){return reject(new Error(data))}data.response=res;return reject(_extends(new Error(data.message),data))}resolve(data)})})}}]);return Service}(_base2.default);exports.default=Service;module.exports=exports["default"]},{"./base":19}],24:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _base=require("./base");var _base2=_interopRequireDefault(_base);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Service=function(_Base){_inherits(Service,_Base);function Service(){_classCallCheck(this,Service);return _possibleConstructorReturn(this,Object.getPrototypeOf(Service).apply(this,arguments))}_createClass(Service,[{key:"request",value:function request(options){var superagent=this.connection(options.method,options.url).set("Accept","application/json").type(options.type||"json");return new Promise(function(resolve,reject){superagent.set(options.headers);if(options.body){superagent.send(options.body)}superagent.end(function(error,res){if(error){try{var response=error.response;error=JSON.parse(error.response.text);error.response=response}catch(e){}return reject(error)}resolve(res&&res.body)})})}}]);return Service}(_base2.default);exports.default=Service;module.exports=exports["default"]},{"./base":19}],25:[function(require,module,exports){arguments[4][16][0].apply(exports,arguments)},{"./lib/client":26,dup:16}],26:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _utils=require("./utils");var _feathersErrors=require("feathers-errors");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var debug=require("debug")("feathers-socket-commons:client");var namespacedEmitterMethods=["addListener","emit","listenerCount","listeners","on","once","prependListener","prependOnceListener","removeAllListeners","removeListener"];var otherEmitterMethods=["eventNames","getMaxListeners","setMaxListeners"];var addEmitterMethods=function addEmitterMethods(service){otherEmitterMethods.forEach(function(method){service[method]=function(){var _connection;if(typeof this.connection[method]!=="function"){throw new Error("Can not call '"+method+"' on the client service connection.")}return(_connection=this.connection)[method].apply(_connection,arguments)}});namespacedEmitterMethods.forEach(function(method){service[method]=function(name){var _connection2;if(typeof this.connection[method]!=="function"){throw new Error("Can not call '"+method+"' on the client service connection.")}var eventName=this.path+" "+name;debug("Calling emitter method "+method+" with "+("namespaced event '"+eventName+"'"));

for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}var result=(_connection2=this.connection)[method].apply(_connection2,[eventName].concat(args));return result===this.connection?this:result}})};var Service=function(){function Service(options){_classCallCheck(this,Service);this.events=_utils.events;this.path=options.name;this.connection=options.connection;this.method=options.method;this.timeout=options.timeout||5e3;addEmitterMethods(this)}_createClass(Service,[{key:"send",value:function send(method){var _this=this;for(var _len2=arguments.length,args=Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){args[_key2-1]=arguments[_key2]}var callback=null;if(typeof args[args.length-1]==="function"){callback=args.pop()}return new Promise(function(resolve,reject){var _connection3;var event=_this.path+"::"+method;var timeoutId=setTimeout(function(){return reject(new Error("Timeout of "+_this.timeout+"ms exceeded calling "+event))},_this.timeout);args.unshift(event);args.push(function(error,data){error=(0,_feathersErrors.convert)(error);clearTimeout(timeoutId);if(callback){callback(error,data)}return error?reject(error):resolve(data)});debug("Sending socket."+_this.method,args);(_connection3=_this.connection)[_this.method].apply(_connection3,args)})}},{key:"find",value:function find(){var params=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];return this.send("find",params.query||{})}},{key:"get",value:function get(id){var params=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];return this.send("get",id,params.query||{})}},{key:"create",value:function create(data){var params=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];return this.send("create",data,params.query||{})}},{key:"update",value:function update(id,data){var params=arguments.length<=2||arguments[2]===undefined?{}:arguments[2];return this.send("update",id,data,params.query||{})}},{key:"patch",value:function patch(id,data){var params=arguments.length<=2||arguments[2]===undefined?{}:arguments[2];return this.send("patch",id,data,params.query||{})}},{key:"remove",value:function remove(id){var params=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];return this.send("remove",id,params.query||{})}},{key:"off",value:function off(){if(typeof this.connection.off==="function"){var _connection4;return(_connection4=this.connection).off.apply(_connection4,arguments)}else if(arguments.length===1){return this.removeAllListeners.apply(this,arguments)}return this.removeEventListener.apply(this,arguments)}}]);return Service}();exports.default=Service;module.exports=exports["default"]},{"./utils":27,debug:1,"feathers-errors":12}],27:[function(require,module,exports){(function(process){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.events=exports.eventMappings=undefined;exports.convertFilterData=convertFilterData;exports.promisify=promisify;exports.normalizeError=normalizeError;var _feathersCommons=require("feathers-commons");var eventMappings=exports.eventMappings={create:"created",update:"updated",patch:"patched",remove:"removed"};var events=exports.events=Object.keys(eventMappings).map(function(method){return eventMappings[method]});function convertFilterData(obj){return _feathersCommons.hooks.convertHookData(obj)}function promisify(method,context){for(var _len=arguments.length,args=Array(_len>2?_len-2:0),_key=2;_key<_len;_key++){args[_key-2]=arguments[_key]}return new Promise(function(resolve,reject){method.apply(context,args.concat(function(error,result){if(error){return reject(error)}resolve(result)}))})}function normalizeError(e){var result={};Object.getOwnPropertyNames(e).forEach(function(key){return result[key]=e[key]});if(process.env.NODE_ENV==="production"){delete result.stack}delete result.hook;return result}}).call(this,require("_process"))},{_process:40,"feathers-commons":9}],28:[function(require,module,exports){arguments[4][16][0].apply(exports,arguments)},{"./lib/client":29,dup:16}],29:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};exports.default=function(connection,options){if(!connection){throw new Error("Socket.io connection needs to be provided")}var defaultService=function defaultService(name){var settings=_extends({},options,{name:name,connection:connection,method:"emit"});return new _client2.default(settings)};var initialize=function initialize(){if(typeof this.defaultService==="function"){throw new Error("Only one default client provider can be configured")}this.io=connection;this.defaultService=defaultService};initialize.Service=_client2.default;initialize.service=defaultService;return initialize};var _client=require("feathers-socket-commons/client");var _client2=_interopRequireDefault(_client);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}module.exports=exports["default"]},{"feathers-socket-commons/client":25}],30:[function(require,module,exports){arguments[4][4][0].apply(exports,arguments)},{"./lib/client/index":33,dup:4}],31:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _debug=require("debug");var _debug2=_interopRequireDefault(_debug);var _feathersCommons=require("feathers-commons");var _uberproto=require("uberproto");var _uberproto2=_interopRequireDefault(_uberproto);var _index=require("./mixins/index");var _index2=_interopRequireDefault(_index);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var debug=(0,_debug2.default)("feathers:application");var methods=["find","get","create","update","patch","remove"];var Proto=_uberproto2.default.extend({create:null});exports.default={init:function init(){Object.assign(this,{methods:methods,mixins:(0,_index2.default)(),services:{},providers:[],_setup:false})},service:function service(location,_service){var _this=this;var options=arguments.length<=2||arguments[2]===undefined?{}:arguments[2];location=(0,_feathersCommons.stripSlashes)(location);if(!_service){var current=this.services[location];if(typeof current==="undefined"&&typeof this.defaultService==="function"){return this.service(location,this.defaultService(location),options)}return current}var protoService=Proto.extend(_service);debug("Registering new service at `"+location+"`");this.mixins.forEach(function(fn){return fn.call(_this,protoService)});if(typeof protoService._setup==="function"){protoService._setup(this,location)}this.providers.forEach(function(provider){return provider.call(_this,location,protoService,options)});if(this._isSetup&&typeof protoService.setup==="function"){debug("Setting up service for `"+location+"`");protoService.setup(this,location)}return this.services[location]=protoService},use:function use(location){var service=void 0,middleware=Array.from(arguments).slice(1).reduce(function(middleware,arg){if(typeof arg==="function"){middleware[service?"after":"before"].push(arg)}else if(!service){service=arg}else{throw new Error("invalid arg passed to app.use")}return middleware},{before:[],after:[]});var hasMethod=function hasMethod(methods){return methods.some(function(name){return service&&typeof service[name]==="function"})};if(hasMethod(["handle","set"])||!hasMethod(this.methods.concat("setup"))){return this._super.apply(this,arguments)}this.service(location,service,{middleware:middleware});return this},setup:function setup(){var _this2=this;Object.keys(this.services).forEach(function(path){var service=_this2.services[path];debug("Setting up service for `"+path+"`");if(typeof service.setup==="function"){service.setup(_this2,path)}});this._isSetup=true;return this},configure:function configure(fn){fn.call(this);return this},listen:function listen(){var server=this._super.apply(this,arguments);this.setup(server);debug("Feathers application listening");return server}};module.exports=exports["default"]},{"./mixins/index":36,debug:1,"feathers-commons":9,uberproto:47}],32:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(){var app={settings:{},get:function get(name){return this.settings[name]},set:function set(name,value){this.settings[name]=value;return this},disable:function disable(name){this.settings[name]=false;return this},disabled:function disabled(name){return!this.settings[name]},enable:function enable(name){this.settings[name]=true;return this},enabled:function enabled(name){return!!this.settings[name]},use:function use(){throw new Error("Middleware functions can not be used in the Feathers client")},listen:function listen(){return{}}};_uberproto2.default.mixin(_events.EventEmitter.prototype,app);return app};var _events=require("events");var _uberproto=require("uberproto");var _uberproto2=_interopRequireDefault(_uberproto);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}module.exports=exports["default"]},{events:3,uberproto:47}],33:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=createApplication;var _feathers=require("../feathers");var _feathers2=_interopRequireDefault(_feathers);var _express=require("./express");var _express2=_interopRequireDefault(_express);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function createApplication(){return(0,_feathers2.default)(_express2.default.apply(undefined,arguments))}createApplication.version="2.0.1";module.exports=exports["default"]},{"../feathers":34,"./express":32}],34:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=createApplication;var _uberproto=require("uberproto");var _uberproto2=_interopRequireDefault(_uberproto);var _application=require("./application");var _application2=_interopRequireDefault(_application);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function createApplication(app){_uberproto2.default.mixin(_application2.default,app);app.init();return app}module.exports=exports["default"]},{"./application":31,uberproto:47}],35:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(service){var isEmitter=typeof service.on==="function"&&typeof service.emit==="function";var emitter=service._rubberDuck=_rubberduck2.default.emitter(service);if(typeof service.mixin==="function"&&!isEmitter){service.mixin(_events.EventEmitter.prototype)}service._serviceEvents=Array.isArray(service.events)?service.events.slice():[];emitter.on("error",function(errors){service.emit("serviceError",errors[0])});Object.keys(eventMappings).forEach(function(method){var event=eventMappings[method];var alreadyEmits=service._serviceEvents.indexOf(event)!==-1;if(typeof service[method]==="function"&&!alreadyEmits){var eventName="after"+upperCase(method);service._serviceEvents.push(event);emitter.punch(method,-1);emitter.on(eventName,function(results,args){if(!results[0]){(function(){var hook=hookObject(method,"after",args);var data=Array.isArray(results[1])?results[1]:[results[1]];data.forEach(function(current){return service.emit(event,current,hook)})})()}else{service.emit("serviceError",results[0])}})}})};var _rubberduck=require("rubberduck");var _rubberduck2=_interopRequireDefault(_rubberduck);var _events=require("events");var _feathersCommons=require("feathers-commons");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var hookObject=_feathersCommons.hooks.hookObject;var eventMappings={create:"created",update:"updated",remove:"removed",patch:"patched"};function upperCase(name){return name.charAt(0).toUpperCase()+name.substring(1)}module.exports=exports["default"]},{events:3,"feathers-commons":9,rubberduck:45}],36:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(){var mixins=[require("./promise"),require("./event"),require("./normalizer")];mixins.push=function(){var args=[this.length-1,0].concat(Array.from(arguments));this.splice.apply(this,args);return this.length};return mixins};module.exports=exports["default"]},{"./event":35,"./normalizer":37,"./promise":38}],37:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(service){var _this=this;if(typeof service.mixin==="function"){(function(){var mixin={};_this.methods.forEach(function(method){if(typeof service[method]==="function"){mixin[method]=function(){return this._super.apply(this,(0,_feathersCommons.getArguments)(method,arguments))}}});service.mixin(mixin)})()}};var _feathersCommons=require("feathers-commons");module.exports=exports["default"]},{"feathers-commons":9}],38:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(service){var _this=this;if(typeof service.mixin==="function"){(function(){var mixin={};_this.methods.forEach(function(method){if(typeof service[method]==="function"){mixin[method]=wrapper}});service.mixin(mixin)})()}};function isPromise(result){return typeof result!=="undefined"&&typeof result.then==="function"}function wrapper(){var result=this._super.apply(this,arguments);var callback=arguments[arguments.length-1];if(typeof callback==="function"&&isPromise(result)){result.then(function(data){return callback(null,data)},function(error){return callback(error)})}return result}module.exports=exports["default"]},{}],39:[function(require,module,exports){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};if("string"==typeof val)return parse(val);return options.long?long(val):short(val)};function parse(str){str=""+str;if(str.length>1e4)return;var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match)return;var n=parseFloat(match[1]);var type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}function short(ms){if(ms>=d)return Math.round(ms/d)+"d";if(ms>=h)return Math.round(ms/h)+"h";if(ms>=m)return Math.round(ms/m)+"m";if(ms>=s)return Math.round(ms/s)+"s";return ms+"ms"}function long(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(ms<n)return;if(ms<n*1.5)return Math.floor(ms/n)+" "+name;return Math.ceil(ms/n)+" "+name+"s"}},{}],40:[function(require,module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;(function(){try{cachedSetTimeout=setTimeout}catch(e){cachedSetTimeout=function(){throw new Error("setTimeout is not defined")}}try{cachedClearTimeout=clearTimeout}catch(e){cachedClearTimeout=function(){throw new Error("clearTimeout is not defined")}}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],41:[function(require,module,exports){"use strict";var Stringify=require("./stringify");var Parse=require("./parse");module.exports={stringify:Stringify,parse:Parse}},{"./parse":42,"./stringify":43}],42:[function(require,module,exports){"use strict";var Utils=require("./utils");var defaults={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1e3,strictNullHandling:false,plainObjects:false,allowPrototypes:false,allowDots:false,decoder:Utils.decode};var parseValues=function parseValues(str,options){var obj={};var parts=str.split(options.delimiter,options.parameterLimit===Infinity?undefined:options.parameterLimit);for(var i=0;i<parts.length;++i){var part=parts[i];var pos=part.indexOf("]=")===-1?part.indexOf("="):part.indexOf("]=")+1;if(pos===-1){obj[options.decoder(part)]="";if(options.strictNullHandling){obj[options.decoder(part)]=null}}else{var key=options.decoder(part.slice(0,pos));var val=options.decoder(part.slice(pos+1));if(Object.prototype.hasOwnProperty.call(obj,key)){obj[key]=[].concat(obj[key]).concat(val)}else{obj[key]=val}}}return obj};var parseObject=function parseObject(chain,val,options){if(!chain.length){return val}var root=chain.shift();var obj;if(root==="[]"){obj=[];obj=obj.concat(parseObject(chain,val,options))}else{obj=options.plainObjects?Object.create(null):{};var cleanRoot=root[0]==="["&&root[root.length-1]==="]"?root.slice(1,root.length-1):root;var index=parseInt(cleanRoot,10);if(!isNaN(index)&&root!==cleanRoot&&String(index)===cleanRoot&&index>=0&&(options.parseArrays&&index<=options.arrayLimit)){obj=[];obj[index]=parseObject(chain,val,options)}else{obj[cleanRoot]=parseObject(chain,val,options)}}return obj};var parseKeys=function parseKeys(givenKey,val,options){if(!givenKey){return}var key=options.allowDots?givenKey.replace(/\.([^\.\[]+)/g,"[$1]"):givenKey;var parent=/^([^\[\]]*)/;var child=/(\[[^\[\]]*\])/g;var segment=parent.exec(key);var keys=[];if(segment[1]){if(!options.plainObjects&&Object.prototype.hasOwnProperty(segment[1])){if(!options.allowPrototypes){return}}keys.push(segment[1])}var i=0;while((segment=child.exec(key))!==null&&i<options.depth){i+=1;if(!options.plainObjects&&Object.prototype.hasOwnProperty(segment[1].replace(/\[|\]/g,""))){if(!options.allowPrototypes){continue}}keys.push(segment[1])}if(segment){keys.push("["+key.slice(segment.index)+"]")}return parseObject(keys,val,options)};module.exports=function(str,opts){var options=opts||{};if(options.decoder!==null&&options.decoder!==undefined&&typeof options.decoder!=="function"){throw new TypeError("Decoder has to be a function.")}options.delimiter=typeof options.delimiter==="string"||Utils.isRegExp(options.delimiter)?options.delimiter:defaults.delimiter;options.depth=typeof options.depth==="number"?options.depth:defaults.depth;options.arrayLimit=typeof options.arrayLimit==="number"?options.arrayLimit:defaults.arrayLimit;options.parseArrays=options.parseArrays!==false;options.decoder=typeof options.decoder==="function"?options.decoder:defaults.decoder;options.allowDots=typeof options.allowDots==="boolean"?options.allowDots:defaults.allowDots;options.plainObjects=typeof options.plainObjects==="boolean"?options.plainObjects:defaults.plainObjects;options.allowPrototypes=typeof options.allowPrototypes==="boolean"?options.allowPrototypes:defaults.allowPrototypes;options.parameterLimit=typeof options.parameterLimit==="number"?options.parameterLimit:defaults.parameterLimit;options.strictNullHandling=typeof options.strictNullHandling==="boolean"?options.strictNullHandling:defaults.strictNullHandling;if(str===""||str===null||typeof str==="undefined"){return options.plainObjects?Object.create(null):{}}var tempObj=typeof str==="string"?parseValues(str,options):str;var obj=options.plainObjects?Object.create(null):{};var keys=Object.keys(tempObj);for(var i=0;i<keys.length;++i){var key=keys[i];var newObj=parseKeys(key,tempObj[key],options);obj=Utils.merge(obj,newObj,options)}return Utils.compact(obj)}},{"./utils":44}],43:[function(require,module,exports){"use strict";var Utils=require("./utils");var arrayPrefixGenerators={brackets:function brackets(prefix){return prefix+"[]"},indices:function indices(prefix,key){return prefix+"["+key+"]"},repeat:function repeat(prefix){return prefix}};var defaults={delimiter:"&",strictNullHandling:false,skipNulls:false,encode:true,encoder:Utils.encode};var stringify=function stringify(object,prefix,generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots){var obj=object;if(typeof filter==="function"){obj=filter(prefix,obj)}else if(obj instanceof Date){obj=obj.toISOString()}else if(obj===null){if(strictNullHandling){return encoder?encoder(prefix):prefix}obj=""}if(typeof obj==="string"||typeof obj==="number"||typeof obj==="boolean"||Utils.isBuffer(obj)){if(encoder){return[encoder(prefix)+"="+encoder(obj)]}return[prefix+"="+String(obj)]}var values=[];if(typeof obj==="undefined"){return values}var objKeys;if(Array.isArray(filter)){objKeys=filter}else{var keys=Object.keys(obj);objKeys=sort?keys.sort(sort):keys}for(var i=0;i<objKeys.length;++i){var key=objKeys[i];if(skipNulls&&obj[key]===null){continue}if(Array.isArray(obj)){values=values.concat(stringify(obj[key],generateArrayPrefix(prefix,key),generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots))}else{values=values.concat(stringify(obj[key],prefix+(allowDots?"."+key:"["+key+"]"),generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots))}}return values};module.exports=function(object,opts){var obj=object;var options=opts||{};var delimiter=typeof options.delimiter==="undefined"?defaults.delimiter:options.delimiter;var strictNullHandling=typeof options.strictNullHandling==="boolean"?options.strictNullHandling:defaults.strictNullHandling;var skipNulls=typeof options.skipNulls==="boolean"?options.skipNulls:defaults.skipNulls;var encode=typeof options.encode==="boolean"?options.encode:defaults.encode;var encoder=encode?typeof options.encoder==="function"?options.encoder:defaults.encoder:null;var sort=typeof options.sort==="function"?options.sort:null;var allowDots=typeof options.allowDots==="undefined"?false:options.allowDots;var objKeys;var filter;if(options.encoder!==null&&options.encoder!==undefined&&typeof options.encoder!=="function"){throw new TypeError("Encoder has to be a function.")}if(typeof options.filter==="function"){filter=options.filter;obj=filter("",obj)}else if(Array.isArray(options.filter)){objKeys=filter=options.filter}var keys=[];if(typeof obj!=="object"||obj===null){return""}var arrayFormat;if(options.arrayFormat in arrayPrefixGenerators){arrayFormat=options.arrayFormat}else if("indices"in options){arrayFormat=options.indices?"indices":"repeat"}else{arrayFormat="indices"}var generateArrayPrefix=arrayPrefixGenerators[arrayFormat];if(!objKeys){objKeys=Object.keys(obj)}if(sort){objKeys.sort(sort)}for(var i=0;i<objKeys.length;++i){var key=objKeys[i];if(skipNulls&&obj[key]===null){continue}keys=keys.concat(stringify(obj[key],key,generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots))}return keys.join(delimiter)}},{"./utils":44}],44:[function(require,module,exports){"use strict";var hexTable=function(){var array=new Array(256);for(var i=0;i<256;++i){array[i]="%"+((i<16?"0":"")+i.toString(16)).toUpperCase()}return array}();exports.arrayToObject=function(source,options){var obj=options.plainObjects?Object.create(null):{};for(var i=0;i<source.length;++i){if(typeof source[i]!=="undefined"){obj[i]=source[i]}}return obj};exports.merge=function(target,source,options){if(!source){return target}if(typeof source!=="object"){if(Array.isArray(target)){target.push(source)}else if(typeof target==="object"){target[source]=true}else{return[target,source]}return target}if(typeof target!=="object"){return[target].concat(source)}var mergeTarget=target;if(Array.isArray(target)&&!Array.isArray(source)){mergeTarget=exports.arrayToObject(target,options)}return Object.keys(source).reduce(function(acc,key){var value=source[key];if(Object.prototype.hasOwnProperty.call(acc,key)){acc[key]=exports.merge(acc[key],value,options)}else{acc[key]=value}return acc},mergeTarget)};exports.decode=function(str){try{return decodeURIComponent(str.replace(/\+/g," "))}catch(e){return str}};exports.encode=function(str){if(str.length===0){return str}var string=typeof str==="string"?str:String(str);var out="";for(var i=0;i<string.length;++i){var c=string.charCodeAt(i);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122){out+=string.charAt(i);continue}if(c<128){out=out+hexTable[c];continue}if(c<2048){out=out+(hexTable[192|c>>6]+hexTable[128|c&63]);continue}if(c<55296||c>=57344){out=out+(hexTable[224|c>>12]+hexTable[128|c>>6&63]+hexTable[128|c&63]);continue}i+=1;c=65536+((c&1023)<<10|string.charCodeAt(i)&1023);out+=hexTable[240|c>>18]+hexTable[128|c>>12&63]+hexTable[128|c>>6&63]+hexTable[128|c&63]}return out};exports.compact=function(obj,references){if(typeof obj!=="object"||obj===null){return obj}var refs=references||[];var lookup=refs.indexOf(obj);if(lookup!==-1){return refs[lookup]}refs.push(obj);if(Array.isArray(obj)){var compacted=[];for(var i=0;i<obj.length;++i){if(obj[i]&&typeof obj[i]==="object"){compacted.push(exports.compact(obj[i],refs))}else if(typeof obj[i]!=="undefined"){compacted.push(obj[i])}}return compacted}var keys=Object.keys(obj);for(var j=0;j<keys.length;++j){var key=keys[j];obj[key]=exports.compact(obj[key],refs)}return obj};exports.isRegExp=function(obj){return Object.prototype.toString.call(obj)==="[object RegExp]"};exports.isBuffer=function(obj){if(obj===null||typeof obj==="undefined"){return false}return!!(obj.constructor&&obj.constructor.isBuffer&&obj.constructor.isBuffer(obj))}},{}],45:[function(require,module,exports){var events=require("events");var utils=require("./utils");var wrap=exports.wrap={fn:function(emitter,fn,strict,name,scope){var wrapped=function(){var result;utils.emitEvents(emitter,"before",name,[arguments,this,name]);try{result=fn.apply(scope||this,arguments)}catch(e){utils.emitEvents(emitter,"error",name,[e,arguments,this,name]);throw e}utils.emitEvents(emitter,"after",name,[result,arguments,this,name]);return result};if(strict){eval("wrapped = "+utils.addArgs(wrapped.toString(),fn.length))}return wrapped},async:function(emitter,fn,position,strict,name,scope){var wrapped=function(){var pos=position==-1?arguments.length-1:position||0;var callback=arguments[pos];var context=this;var methodArgs=arguments;var callbackWrapper=function(){try{callback.apply(callback,arguments)}catch(e){utils.emitEvents(emitter,"error",name,[e,methodArgs,context,name]);throw e}var eventType=arguments[0]instanceof Error?"error":"after";utils.emitEvents(emitter,eventType,name,[arguments,methodArgs,context,name])};utils.emitEvents(emitter,"before",name,[methodArgs,this,name]);methodArgs[pos]=callbackWrapper;try{return fn.apply(scope||this,methodArgs)}catch(e){utils.emitEvents(emitter,"error",name,[e,methodArgs,context,name]);throw e}};if(strict){eval("wrapped = "+utils.addArgs(wrapped.toString(),fn.length))}return wrapped}};var Emitter=exports.Emitter=function(obj){this.obj=obj};Emitter.prototype=Object.create(events.EventEmitter.prototype);Emitter.prototype.punch=function(method,position,strict){if(Array.isArray(method)){var self=this;method.forEach(function(method){self.punch(method,position,strict)})}else{var old=this.obj[method];if(typeof old=="function"){this.obj[method]=!position&&position!==0?wrap.fn(this,old,strict,method):wrap.async(this,old,position,strict,method)}}return this};exports.emitter=function(obj){return new Emitter(obj)}},{"./utils":46,events:3}],46:[function(require,module,exports){exports.toBase26=function(num){var outString="";var letters="abcdefghijklmnopqrstuvwxyz";while(num>25){var remainder=num%26;outString=letters.charAt(remainder)+outString;num=Math.floor(num/26)-1}outString=letters.charAt(num)+outString;return outString};exports.makeFakeArgs=function(len){var argArr=[];for(var i=0;i<len;i++){argArr.push(exports.toBase26(i))}return argArr.join(",")};exports.addArgs=function(fnString,argLen){return fnString.replace(/function\s*\(\)/,"function("+exports.makeFakeArgs(argLen)+")")};exports.emitEvents=function(emitter,type,name,args){var ucName=name?name.replace(/^\w/,function(first){return first.toUpperCase()}):null;emitter.emit.apply(emitter,[type].concat(args));if(ucName){emitter.emit.apply(emitter,[type+ucName].concat(args))}}},{}],47:[function(require,module,exports){(function(root,factory){if(typeof define==="function"&&define.amd){define([],factory)}else if(typeof exports==="object"){module.exports=factory()}else{root.Proto=factory()}})(this,function(){function makeSuper(_super,old,name,fn){return function(){var tmp=this._super;this._super=typeof old==="function"?old:_super[name];var ret=fn.apply(this,arguments);this._super=tmp;return ret}}function legacyMixin(prop,obj){var self=obj||this;var fnTest=/\b_super\b/;var _super=Object.getPrototypeOf(self)||self.prototype;var _old;for(var name in prop){_old=self[name];if((typeof prop[name]==="function"&&typeof _super[name]==="function"||typeof _old==="function"&&typeof prop[name]==="function")&&fnTest.test(prop[name])){self[name]=makeSuper(_super,_old,name,prop[name])}else{self[name]=prop[name]}}return self}function es5Mixin(prop,obj){var self=obj||this;var fnTest=/\b_super\b/;var _super=Object.getPrototypeOf(self)||self.prototype;var descriptors={};var proto=prop;var processProperty=function(name){if(!descriptors[name]){descriptors[name]=Object.getOwnPropertyDescriptor(proto,name)}};do{Object.getOwnPropertyNames(proto).forEach(processProperty)}while((proto=Object.getPrototypeOf(proto))&&Object.getPrototypeOf(proto));Object.keys(descriptors).forEach(function(name){var descriptor=descriptors[name];if(typeof descriptor.value==="function"&&fnTest.test(descriptor.value)){descriptor.value=makeSuper(_super,self[name],name,descriptor.value)}Object.defineProperty(self,name,descriptor)});return self}return{create:function(){var instance=Object.create(this);var init=typeof instance.__init==="string"?instance.__init:"init";if(typeof instance[init]==="function"){instance[init].apply(instance,arguments)}return instance},mixin:typeof Object.defineProperty==="function"?es5Mixin:legacyMixin,extend:function(prop,obj){return this.mixin(prop,Object.create(obj||this))},proxy:function(name){var fn=this[name];var args=Array.prototype.slice.call(arguments,1);args.unshift(this);return fn.bind.apply(fn,args)}}})},{}],48:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _client=require("feathers/client");var _client2=_interopRequireDefault(_client);var _client3=require("feathers-rest/client");var _client4=_interopRequireDefault(_client3);var _client5=require("feathers-socketio/client");var _client6=_interopRequireDefault(_client5);var _client7=require("feathers-primus/client");var _client8=_interopRequireDefault(_client7);var _feathersHooks=require("feathers-hooks");var _feathersHooks2=_interopRequireDefault(_feathersHooks);var _client9=require("feathers-authentication/client");var _client10=_interopRequireDefault(_client9);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.assign(_client2.default,{socketio:_client6.default,primus:_client8.default,rest:_client4.default,hooks:_feathersHooks2.default,authentication:_client10.default});exports.default=_client2.default;module.exports=exports["default"]},{"feathers-authentication/client":4,"feathers-hooks":15,"feathers-primus/client":16,"feathers-rest/client":18,"feathers-socketio/client":28,"feathers/client":30}]},{},[48])(48)});
